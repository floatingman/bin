<!--#if $paused #-->
<!--#set $kbpersec = "0"#-->
<!--#end if#-->

<h3>Queue</h3>
<div id="centerLinks">
<a onClick="lr('queue/sort_by_name','session=$session', '-1', this.parentNode.parentNode.id);" >Sort by name</a>  |
<a onClick="lr('queue/sort_by_avg_age','session=$session', '-1', this.parentNode.parentNode.id);" >Sort by date</a>  |
<a onClick="lr('queue/sort_by_size','session=$session', '-1', this.parentNode.parentNode.id);" >Sort by size</a>  |
<a onClick="if(confirm('Delete the all items from the queue?')){lr('queue/purge','session=$session', '-1', this.parentNode.parentNode.id);}" >Delete All</a> |
On queue finish:
<select onChange="javascript:changequeuedetails('queue/change_queue_complete_action?session=$session&action='+this.options[this.selectedIndex].value)">
<option value=""></option>
    <optgroup label="Actions">
        <!--#if $nt or $darwin#-->
        <option value="shutdown_pc" <!--#if $finishaction == 'shutdown_pc' then 'selected' else ''#-->>Shutdown PC</option>
        <option value="standby_pc" <!--#if $finishaction == 'standby_pc' then 'selected' else ''#-->>Standby PC</option>
        <!--#end if#-->
        <!--#if $nt#-->
        <option value="hibernate_pc" <!--#if $finishaction == 'hibernate_pc' then 'selected' else ''#-->>Hibernate PC</option>
        <!--#end if#-->
        <option value="shutdown_program" <!--#if $finishaction == 'shutdown_program' then 'selected' else ''#-->>Shutdown SABnzbd</option>
    </optgroup>
<!--#if $script_list#-->
    <optgroup label="Scripts">
    <!--#for $sc in $script_list#-->
        <!--#if $sc != 'None'#-->
        <option value="script_$sc" <!--#if $finishaction == 'script_'+$sc then 'selected' else ''#-->>$sc</option>
        <!--#end if#-->
    <!--#end for#-->
    </optgroup>
<!--#end if#-->
</select>
</div>

<!--#if int($cache_limit)#-->
<center><b>$cache_art</b> articles buffered in <b>$cache_size</b> bytes<br></center>
<!--#end if#-->
<!--#if $nzb_quota then "<b>NzbQuota:</b> %s<b>" %($nzb_quota) else ""#-->

<!--#if float($mb)>0 #-->
<!--#set $perc = round( (1-(float($mbleft) / float($mb))) * 100, 2)#-->
<!--#if $varExists('slotinfo')#-->
<center><strong>$perc%</strong> - <span id="left">$mbleft</span>/<span id="total">$mb</span> MB -
Timeleft: <strong>$timeleft</strong> ETA: <strong>$eta</strong>
 <!--#end if#--><br /> </center>
 <!--#end if#-->
 <table id="queueTable" class="datagrid">

	<thead>
    <tr>
		<!--<th mochi:format="str"></th>-->
		<th mochi:format="str" id="order">Order</th>
        <!--#if $script_list#--><th>Script</th><!--#end if#-->
        <!--#if $cat_list#--><th>Category</th><!--#end if#-->
		<th mochi:format="str">Name</th>
		<th mochi:format="str">Percentage</th>
		<th mochi:format="str">Remain/Total</th>
        <th mochi:format="str">Timeleft</th>
		<th mochi:format="str">ETA</th>
		<th mochi:format="str">Age</th>
	</tr>
	</thead>
	<tfoot class="invisible">

		<tr>
			<td colspan="0"></td>
		</tr>
	</tfoot>
	<tbody>
  <!--#if $varExists('slotinfo')#-->
    <!--#set $odd = False#-->
    <!--#for $slot in $slotinfo#-->
        <!--#set $odd = not $odd#-->
        <tr id="$slot.nzo_id" class="<!--#if $odd then "odd" else "even"#-->">
		<!--<td><input type="checkbox" "></td>checked-->
	<td>
<form>


            <select onclick="restartTimer(5)" onchange="javascript:changequeuedetails('queue/'+this.options[this.selectedIndex].value)">
            <!--#for $i in xrange($noofslots)#-->
                <option value="switch?session=$session&uid1=$slot.nzo_id&uid2=$slotinfo[i].nzo_id" <!--#if $i == $slot.index then "selected" else ""#-->>$i</option>
            <!--#end for#-->
            </select>
            <select onclick="restartTimer(5)" onchange="javascript:changequeuedetails('queue/change_opts?session=$session&nzo_id='+this.options[this.selectedIndex].value)">
                <option value="$slot.nzo_id&pp=0" <!--#if $slot.unpackopts == "0" then "selected" else ""#-->></option>
                <option value="$slot.nzo_id&pp=1" <!--#if $slot.unpackopts == "1" then "selected" else ""#-->>R</option>
                <option value="$slot.nzo_id&pp=2" <!--#if $slot.unpackopts == "2" then "selected" else ""#-->>U</option>
                <option value="$slot.nzo_id&pp=3" <!--#if $slot.unpackopts == "3" then "selected" else ""#-->>D</option>
			</select>


            <span class="del">
			<a onClick="deletequeueitem('$slot.nzo_id', '$session');"><img id="delicon" src="static/images/32px-Crystal_Clear_action_stop.png" /></a>
			</form>
            </td>
        <!--#if $script_list#-->
		<td>

                <form>
                <select onchange="javascript:changequeuedetails('queue/change_script?session=$session&nzo_id=$slot.nzo_id&script='+this.options[this.selectedIndex].value);">
                <!--#for $sc in $script_list#-->
                    <option value="$sc" <!--#if $slot.script.lower() == $sc.lower() then "selected" else ""#-->>$sc</option>
                <!--#end for#-->
                </select>
                </form>
		</td>
            <!--#end if#-->

            <!--#if $cat_list#-->
            <td><form>
            <select onchange="javascript:changequeuedetails('queue/change_cat?session=$session&nzo_id=$slot.nzo_id&cat='+this.options[this.selectedIndex].value);">
                <!--#for $ct in $cat_list#-->
                    <option value="$ct" <!--#if $slot.cat.lower() == $ct.lower() then "selected" else ""#-->>$ct</option>
                <!--#end for#-->
                </select></form>
            </td>
            <!--#end if#-->


		<td>
            <span class="filename"><a onClick="javascript:toggle_verbosity('$slot.nzo_id', '&session=$session')"><span id="name_$slot.nzo_id">$slot.filename</span></a></span>

	<td>
<!--#if float($slot.mb)>0 #-->
<!--#set $perc = round( (1-(float($slot.mbleft) / float($slot.mb))) * 100, 2)#-->
<div id="progressBar"><div id="progress_$slot.nzo_id" style="width: $perc%;   position: relative;   background-color: #9bf;   height: 6px;"><!-- --></div></div>
<!--#end if#-->
	</td>
	<td>
	<span class="pre"> <span id="left_$slot.nzo_id">$slot.mbleft</span>/<span id="total_$slot.nzo_id">$slot.mb</span> MB</span>
	</td>
</span>
<td>$slot.timeleft</td>
<td>$slot.eta</td>
<td>$slot.avg_age</td>
        </tr>
        <!--#set $oddLine = False#-->
        <!--#for $line in $slot.finished#-->
            <!--#set $oddLine = not $oddLine#-->
            <tr id="finished" class="<!--#if $oddLine then "oddLine" else "evenLine"#--> finished"><td>Finished</td><!--#if $script_list#--><td></td><!--#end if#--><!--#if $cat_list#--><td></td><!--#end if#--><td>$line.filename</td><td></td><td class="pre">$line.mbleft/$line.mb MB<td></td><td></td><td>$line.age</td></tr>
        <!--#end for#-->
        <!--#set $oddLine = False#-->
        <!--#for $line in $slot.active#-->
            <!--#set $oddLine = not $oddLine#-->
            <tr id="active" class="<!--#if $oddLine then "oddLine" else "evenLine"#--> active"><td><a onClick="changequeuedetails('queue/removeNzf?session=$session&nzo_id=$slot.nzo_id&nzf_id=$line.nzf_id')"><img id="delicon" src="static/images/32px-Crystal_Clear_action_stop.png" /></a> Active</td><!--#if $script_list#--><td></td><!--#end if#--><!--#if $cat_list#--><td></td><!--#end if#--><td>$line.filename</td><td></td><td class="pre">$line.mbleft/$line.mb MB</td><td></td><td></td><td>$line.age</td></tr>
        <!--#end for#-->
        <!--#set $oddLine = False#-->
        <!--#for $line in $slot.queued#-->
            <!--#set $oddLine = not $oddLine#-->
            <tr id="waiting" class="<!--#if $oddLine then "oddLine" else "evenLine"#--> waiting"><td>Waiting</td><!--#if $script_list#--><td></td><!--#end if#--><!--#if $cat_list#--><td></td><!--#end if#--><td>$line.filename (set: $line.set)</td><td></td><td class="pre">$line.mbleft/$line.mb MB<td></td><td></td><td>$line.age</td></tr>
        <!--#end for#-->
    <!--#end for#--><!--#end if#-->
    </table>
